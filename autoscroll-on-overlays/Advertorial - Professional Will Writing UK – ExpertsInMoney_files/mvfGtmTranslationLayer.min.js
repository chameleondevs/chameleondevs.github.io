var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(c){return c.raw=c};$jscomp.createTemplateTagFirstArgWithRaw=function(c,a){c.raw=a;return c};$jscomp.arrayIteratorImpl=function(c){var a=0;return function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.makeIterator=function(c){var a="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return a?a.call(c):$jscomp.arrayIterator(c)};
$jscomp.arrayFromIterator=function(c){for(var a,b=[];!(a=c.next()).done;)b.push(a.value);return b};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.owns=function(c,a){return Object.prototype.hasOwnProperty.call(c,a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){if(c==Array.prototype||c==Object.prototype)return c;c[a]=b.value;return c};
$jscomp.getGlobal=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<c.length;++a){var b=c[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(c,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return c[a];b=c[b];return void 0!==b?b:c[a]};$jscomp.polyfill=function(c,a,b,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(c,a,b,d):$jscomp.polyfillUnisolated(c,a,b,d))};
$jscomp.polyfillUnisolated=function(c,a,b,d){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var f=c[d];if(!(f in b))return;b=b[f]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(c,a,b,d){var f=c.split(".");c=1===f.length;d=f[0];d=!c&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<f.length-1;g++){var e=f[g];if(!(e in d))return;d=d[e]}f=f[f.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[f]:null;a=a(b);null!=a&&(c?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:a}):a!==b&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&(b=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+b+"$"+f),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:a})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(c,a){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var f in d)$jscomp.owns(d,f)&&(c[f]=d[f])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},a={};try{return a.__proto__=c,a.a}catch(b){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,a){c.__proto__=a;if(c.__proto__!==a)throw new TypeError(c+" is not extensible");return c}:null;$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,a){this.nextAddress=a;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,a){c=$jscomp.makeIterator(c);var b=c.next();$jscomp.generator.ensureIteratorResultIsObject_(b);if(b.done)this.yieldResult=b.value,this.nextAddress=a;else return this.yieldAllIterator_=c,this.yield(b.value,a)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,a){this.catchAddress_=c;void 0!=a&&(this.finallyAddress_=a)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,a){this.nextAddress=c;this.catchAddress_=a||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,a,b){b?this.finallyContexts_[b]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=a||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,a){a=this.finallyContexts_.splice(a||0)[0];if(a=this.abruptCompletion_=this.abruptCompletion_||a){if(a.isException)return this.jumpToErrorHandler_();void 0!=a.jumpTo&&this.finallyAddress_<a.jumpTo?(this.nextAddress=a.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var a in c)this.properties_.push(a);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a)return this.yieldAllStep_("return"in a?a["return"]:function(b){return{value:b,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,a,b){try{var d=c.call(this.context_.yieldAllIterator_,a);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var f=d.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}this.context_.yieldAllIterator_=null;b.call(this.context_,f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(a){this.context_.yieldResult=void 0,this.context_.throw_(a)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(a){return c.next_(a)};this.throw=function(a){return c.throw_(a)};this.return=function(a){return c.return_(a)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,a){a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a));$jscomp.setPrototypeOf&&c.prototype&&$jscomp.setPrototypeOf(a,c.prototype);return a};
$jscomp.asyncExecutePromiseGenerator=function(c){function a(d){return c.next(d)}function b(d){return c.throw(d)}return new Promise(function(d,f){function g(e){e.done?d(e.value):Promise.resolve(e.value).then(a,b).then(g,f)}g(c.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(c){return $jscomp.asyncExecutePromiseGenerator(c())};$jscomp.asyncExecutePromiseGeneratorProgram=function(c){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(c){if(c)return c;var a=function(g,e){this.$jscomp$symbol$id_=g;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};a.prototype.toString=function(){return this.$jscomp$symbol$id_};var b="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",d=0,f=function(g){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new a(b+(g||"")+"_"+d++,g)};return f},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<a.length;b++){var d=$jscomp.global[a[b]];"function"===typeof d&&"function"!=typeof d.prototype[c]&&$jscomp.defineProperty(d.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return c},"es6",
"es3");$jscomp.iteratorPrototype=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};
$jscomp.polyfill("Promise",function(c){function a(){this.batch_=null}function b(e){return e instanceof f?e:new f(function(h,k){h(e)})}if(c&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return c;a.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var h=this;this.asyncExecuteFunction(function(){h.executeBatch_()})}this.batch_.push(e)};
var d=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(e){d(e,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var h=0;h<e.length;++h){var k=e[h];e[h]=null;try{k()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};a.prototype.asyncThrow_=function(e){this.asyncExecuteFunction(function(){throw e;})};var f=function(e){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var h=this.createResolveAndReject_();
try{e(h.resolve,h.reject)}catch(k){h.reject(k)}};f.prototype.createResolveAndReject_=function(){function e(l){return function(m){k||(k=!0,l.call(h,m))}}var h=this,k=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}};f.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof f)this.settleSameAsPromise_(e);else{a:switch(typeof e){case "object":var h=null!=e;break a;case "function":h=!0;break a;default:h=!1}h?this.resolveToNonPromiseObj_(e):
this.fulfill_(e)}};f.prototype.resolveToNonPromiseObj_=function(e){var h=void 0;try{h=e.then}catch(k){this.reject_(k);return}"function"==typeof h?this.settleSameAsThenable_(h,e):this.fulfill_(e)};f.prototype.reject_=function(e){this.settle_(2,e)};f.prototype.fulfill_=function(e){this.settle_(1,e)};f.prototype.settle_=function(e,h){if(0!=this.state_)throw Error("Cannot settle("+e+", "+h+"): Promise already settled in state"+this.state_);this.state_=e;this.result_=h;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};f.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;d(function(){if(e.notifyUnhandledRejection_()){var h=$jscomp.global.console;"undefined"!==typeof h&&h.error(e.result_)}},1)};f.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=$jscomp.global.CustomEvent,h=$jscomp.global.Event,k=$jscomp.global.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):
"function"===typeof h?e=new h("unhandledrejection",{cancelable:!0}):(e=$jscomp.global.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.result_;return k(e)};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)g.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var g=new a;f.prototype.settleSameAsPromise_=function(e){var h=this.createResolveAndReject_();
e.callWhenSettled_(h.resolve,h.reject)};f.prototype.settleSameAsThenable_=function(e,h){var k=this.createResolveAndReject_();try{e.call(h,k.resolve,k.reject)}catch(l){k.reject(l)}};f.prototype.then=function(e,h){function k(p,q){return"function"==typeof p?function(r){try{l(p(r))}catch(t){m(t)}}:q}var l,m,n=new f(function(p,q){l=p;m=q});this.callWhenSettled_(k(e,l),k(h,m));return n};f.prototype.catch=function(e){return this.then(void 0,e)};f.prototype.callWhenSettled_=function(e,h){function k(){switch(l.state_){case 1:e(l.result_);
break;case 2:h(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?g.asyncExecute(k):this.onSettledCallbacks_.push(k);this.isRejectionHandled_=!0};f.resolve=b;f.reject=function(e){return new f(function(h,k){k(e)})};f.race=function(e){return new f(function(h,k){for(var l=$jscomp.makeIterator(e),m=l.next();!m.done;m=l.next())b(m.value).callWhenSettled_(h,k)})};f.all=function(e){var h=$jscomp.makeIterator(e),k=h.next();return k.done?b([]):new f(function(l,
m){function n(r){return function(t){p[r]=t;q--;0==q&&l(p)}}var p=[],q=0;do p.push(void 0),q++,b(k.value).callWhenSettled_(n(p.length-1),m),k=h.next();while(!k.done)})};return f},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push([d,a[d]]);return b}},"es8","es3");$jscomp.polyfill("Object.values",function(c){return c?c:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push(a[d]);return b}},"es8","es3");
$jscomp.iteratorFromArray=function(c,a){c instanceof String&&(c+="");var b=0,d=!1,f={next:function(){if(!d&&b<c.length){var g=b++;return{value:a(g,c[g]),done:!1}}d=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.findInternal=function(c,a,b){c instanceof String&&(c=String(c));for(var d=c.length,f=0;f<d;f++){var g=c[f];if(a.call(b,g,f,c))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
$jscomp.polyfill("Object.fromEntries",function(c){return c?c:function(a){var b={};if(!(Symbol.iterator in a))throw new TypeError(""+a+" is not iterable");a=a[Symbol.iterator].call(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");b[d[0]]=d[1]}return b}},"es_2019","es3");$jscomp.polyfill("Number.isNaN",function(c){return c?c:function(a){return"number"===typeof a&&isNaN(a)}},"es6","es3");
window.chameleon=window.chameleon||{};
window.chameleon.mvfGtmTranslationLayer=function(){var c=function(){this.chameleonWidgets={};this.encryptionKeys=null};c.getInstance=function(){c.instance||(c.instance=new c);return c.instance};c.runIfFunction=function(a,b){"function"===typeof a&&a(b)};c.pushEventToDataLayer=function(a,b){window.dataLayer=window.dataLayer||[];window.dataLayer.push(Object.assign({},b,{event:a}))};c.buildFormPages=function(a){var b={};Object.entries(a).forEach(function(d){var f=$jscomp.makeIterator(d);d=f.next().value;
f=f.next().value;void 0===b[f.page]&&(b[f.page]={});b[f.page][d]={name:f.name,inputType:f.inputType,page:f.page,id:d}});return b};c.buildComponentVisibility=function(a){var b={};Object.entries(a).forEach(function(d){var f=$jscomp.makeIterator(d);d=f.next().value;f=f.next().value;b[d]=f.isVisible});return b};c.buildSupplierMatchPages=function(a){var b={};Object.entries(a).forEach(function(d){var f=$jscomp.makeIterator(d);d=f.next().value;f=f.next().value;"supplier-match"===f.inputType&&(b[f.page]?
b[f.page].push(d):b[f.page]=[d])});return b};c.exportKey=function(a){var b,d,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(crypto.subtle.exportKey("spki",a),4);if(2!=g.nextAddress)return b=g.yieldResult,d=btoa(String.fromCharCode.apply(String,$jscomp.arrayFromIterable(new Uint8Array(b)))),g.return(d);f=g.enterCatchBlock();console.error("Public key export error:",f);return g.return(null)})};c.prototype.getPublicKeyString=
function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?a.encryptionKeys?b.jumpTo(2):b.yield(a.generateKeyPair(),2):b.return(c.exportKey(a.encryptionKeys.publicKey))})};c.prototype.generateKeyPair=function(){var a=this,b,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return f.setCatchFinallyBlocks(2),b=a,f.yield(crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,
1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]),4);if(2!=f.nextAddress)return b.encryptionKeys=f.yieldResult,f.leaveTryBlock(0);d=f.enterCatchBlock();console.error("Key pair generation error:",d);return f.return(null)})};c.prototype.decryptMessage=function(a){var b=this,d,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.setCatchFinallyBlocks(2),d=new Uint8Array(atob(a).split("").map(function(h){return h.charCodeAt(0)})),e.yield(crypto.subtle.decrypt({name:"RSA-OAEP"},
b.encryptionKeys.privateKey,d),4);if(2!=e.nextAddress)return f=e.yieldResult,e.return((new TextDecoder).decode(f));g=e.enterCatchBlock();console.error("Decryption error:",g);return e.return(null)})};c.prototype.getCurrentWidget=function(a){return this.chameleonWidgets[a]};c.prototype.getFormPages=function(a){return this.getCurrentWidget(a).formPages};c.prototype.getPage=function(a,b){return this.getFormPages(a)[b]};c.prototype.getAnswerDetails=function(a){return this.getCurrentWidget(a).answerDetails};
c.prototype.getSubcategoryDetails=function(a){return this.getCurrentWidget(a).subcategoryDetails};c.prototype.getSubmissionPage=function(a){return this.chameleonWidgets[a].submissionPage};c.prototype.getSupplierMatchDetails=function(a){return this.getCurrentWidget(a).supplierMatch};c.prototype.getSupplierMatchPages=function(a){return this.getSupplierMatchDetails(a).supplierMatchPages};c.prototype.getSupplierMatchesOnPage=function(a,b){var d=this;return(b=this.getPage(a,b))?Object.values(b).filter(function(f){return"supplier-match"===
f.inputType&&d.isVisibleComponent(a,f.id)}):[]};c.prototype.getSupplierMatchesBetweenPages=function(a,b,d){var f=[],g=Math.max(b,d);for(b=Math.min(b,d);b<=g;b+=1)f=[].concat($jscomp.arrayFromIterable(f),$jscomp.arrayFromIterable(this.getSupplierMatchesOnPage(a,b)));return f};c.prototype.getSupplierMatchInfo=function(a,b){a=this.getAnswerDetails(a)[b.id].value;return{matchesSelected:a,numberOfMatchesSelected:a.split(", ").length,matchesShown:b.matches.join(", "),numberOfMatchesShown:b.matches.length,
isDynamicMatches:b.isDynamicMatches,matchLevel:b.matchLevel,hiddenForSingleMatch:b.hiddenForSingleMatch}};c.prototype.pushEventsForSupplierMatches=function(a){var b=this,d=a.iFrameId,f=a.eventName,g=a.currentQuestionNumber,e=a.totalQuestions,h=a.widgetLabel;a.supplierMatches.forEach(function(k){k=Object.assign({},b.getSupplierMatchInfo(d,k),{iFrameId:d,currentQuestionNumber:g,totalQuestions:e,widgetLabel:h,visitorId:b.getCurrentWidget(d).visitorId});c.pushEventToDataLayer(f,k)})};c.prototype.getComponentAnswerDetails=
function(a,b){return this.getAnswerDetails(a)[b]};c.prototype.getQuestionNumberForDisplay=function(a,b,d){var f=this,g=0,e=b;d&&(e=Math.min(b,d));d=this.getCurrentWidget(a);b=d.formPages;d=d.appointmentBooking;for(var h=1;h<=parseInt(e,10);h+=1)"object"!==typeof b[h]||!Object.values(b[h]).some(function(k){return f.isVisibleQuestionInput(a,k)&&!f.isHiddenSupplierMatch(a,k)})&&h!==d.page||(g+=1);return g};c.prototype.getTotalQuestions=function(a){return Object.keys(this.getFormPages(a)).length};c.prototype.getTotalQuestionsForDisplay=
function(a,b){return this.getQuestionNumberForDisplay(a,this.getTotalQuestions(a),b)};c.prototype.getCurrentQuestionInfo=function(a,b,d){var f=this,g=this.getPage(a,b);g=Object.values(g).filter(function(e){return f.isVisibleQuestionInput(a,e)&&!f.isHiddenSupplierMatch(a,e)});return{currentQuestion:g.map(function(e){return e.name.trim()}).join("|"),currentQuestionNumber:this.getQuestionNumberForDisplay(a,b,d),currentComponentId:g.map(function(e){return e.id}).join("|"),currentQuestionInputType:g.map(function(e){return e.inputType}).join("|")}};
c.prototype.getLastAnsweredQuestionInfo=function(a,b){var d=this,f={},g=this.getCurrentWidget(a),e=g.formPages,h=g.furthestNavigatedPage;g=Object.keys(e).filter(function(k){return parseInt(k,10)<parseInt(h,10)});if(0===g.length)return f;g.sort(function(k,l){return k-l});g.reverse();g.some(function(k){var l=Object.values(e[k]).filter(function(n){return d.isVisibleQuestionInput(a,n)&&!d.isHiddenSupplierMatch(a,n)});if(0<l.length&&l.every(function(n){return void 0!==d.getComponentAnswerDetails(a,n.id)})){var m=
Object.values(d.getAnswerDetails(a)).find(function(n){return!!n.visitorTier});m=m?m.visitorTier:"";f={lastAnsweredQuestion:l.map(function(n){return n.name.trim()}).join("|"),lastAnsweredQuestionNumber:d.getQuestionNumberForDisplay(a,k,b),lastAnsweredAnswer:l.map(function(n){return d.getComponentAnswerDetails(a,n.id).value}).join("|"),visitorTier:m};return!0}return!1});return f};c.prototype.getComponentVisibility=function(a){return this.getCurrentWidget(a).componentVisibility};c.prototype.isVisibleComponent=
function(a,b){return this.getComponentVisibility(a)[b]};c.prototype.areSupplierMatchesHidden=function(a){return this.getSupplierMatchDetails(a).areSupplierMatchesHidden};c.prototype.isHiddenSupplierMatch=function(a,b){return"supplier-match"===b.inputType&&this.areSupplierMatchesHidden(a)};c.prototype.isVisibleQuestionInput=function(a,b){return"loader"!==b.inputType&&"html"!==b.inputType&&"text"!==b.inputType&&!this.isHiddenSupplierMatch(a,b)&&"hint"!==b.inputType&&this.isVisibleComponent(a,b.id)};
c.prototype.isFormPagesBuildComplete=function(a){return 0!==Object.keys(this.getFormPages(a)).length};c.prototype.getErrorsInfo=function(a){var b=this.chameleonWidgets[a].currentQuestionErrors;a={};a=Object.keys(b).map(function(e){return b[e].errorType}).join("|");var d=Object.keys(b).map(function(e){return b[e].inputType}).join("|"),f=Object.keys(b).map(function(e){return b[e].currentQuestion.trim()}).join("|"),g=Object.keys(b).join("|");return a={errorType:a,currentQuestionInputType:d,currentQuestion:f,
currentComponentId:g}};c.prototype.getAppointmentBookingDetails=function(a,b){if(!a)return{};b=this.getCurrentWidget(b).appointmentBooking;return{appointmentBookingId:a,appointmentDate:b.date,appointmentTime:b.time,appointmentIsoDate:b.isoDate,clinicName:b.clinic.name,clinicId:b.clinic.id}};c.prototype.pageChangedEventHandler=function(a,b){var d=this.chameleonWidgets[a],f=d.widgetLabel;this.isFormPagesBuildComplete(a)||(d.formPages=c.buildFormPages(b.formComponents));d.componentVisibility=c.buildComponentVisibility(b.formComponents);
var g=b.destinationPage>b.fromPage,e=this.getTotalQuestionsForDisplay(a,b.submissionPage);b.destinationPage>d.furthestNavigatedPage&&(d.furthestNavigatedPage=b.destinationPage);var h=this.getCurrentQuestionInfo(a,b.destinationPage,b.destinationPage),k=h.currentQuestion;d=h.currentQuestionNumber;var l=h.currentComponentId,m=h.currentQuestionInputType;h=!1;b.submissionPage&&(h=b.destinationPage>b.submissionPage);""!==k&&(k=Object.assign({},{iFrameId:a,totalQuestions:e,widgetLabel:f,currentQuestion:k,
currentQuestionNumber:d,currentComponentId:l,currentQuestionInputType:m,isSubmissionPage:!!b.isFinalPageBeforeSubmission,visitorId:this.getCurrentWidget(a).visitorId},this.getLastAnsweredQuestionInfo(a,b.submissionPage)),h&&(k=Object.assign({},k,{isPostSubmission:h})),c.pushEventToDataLayer("pageChanged",k),this.chameleonWidgets[a].currentQuestionErrors={});k=g?this.getSupplierMatchesBetweenPages(a,b.fromPage+1,b.destinationPage):this.getSupplierMatchesBetweenPages(a,b.fromPage-1,b.destinationPage);
b.submissionPage&&b.submissionPage>=b.fromPage&&b.submissionPage<b.destinationPage||(0<k.length&&this.pushEventsForSupplierMatches({iFrameId:a,supplierMatches:k,eventName:"supplierMatchShown",currentQuestionNumber:d,totalQuestions:e,widgetLabel:f}),g&&(b=this.getSupplierMatchesBetweenPages(a,b.fromPage,b.destinationPage-1),0<b.length&&this.pushEventsForSupplierMatches({iFrameId:a,supplierMatches:b,eventName:"supplierMatchSubmitted",currentQuestionNumber:d,totalQuestions:e,widgetLabel:f})))};c.prototype.formErrorEventHandler=
function(a,b){b={errorType:b.errorType,inputType:b.componentInputType,iFrameId:a,componentId:b.componentId,currentQuestion:b.currentQuestion,currentQuestionNumber:this.getQuestionNumberForDisplay(a,b.pageNumber,b.submissionPage)};this.chameleonWidgets[a].currentQuestionErrors=Object.assign({},this.chameleonWidgets[a].currentQuestionErrors);this.chameleonWidgets[a].currentQuestionErrors[b.componentId]=b};c.prototype.decryptAnswers=function(a){var b=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return f.yield(Promise.all(Object.values(a).map(function(g){var e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(b.decryptMessage(g.value),2);e=h.yieldResult;return h.return(["answers["+g.mappedQuestionId+"]",e])})})),2);d=f.yieldResult;return f.return(Object.fromEntries(d.filter(Boolean)))})};c.prototype.formSubmitEventHandler=function(a,b){var d=this,f=this.chameleonWidgets[a],g=this.getTotalQuestions(a),e=this.getQuestionNumberForDisplay(a,
g,g),h=this.getQuestionNumberForDisplay(a,g,b.submissionPage),k=f.widgetLabel;if(b.fromPage<g){var l=this.getSupplierMatchesBetweenPages(a,b.fromPage+1,g);0<l.length&&this.pushEventsForSupplierMatches({iFrameId:a,supplierMatches:l,eventName:"supplierMatchShown",currentQuestionNumber:e,totalQuestions:h,widgetLabel:k})}l=this.getSupplierMatchesBetweenPages(a,b.fromPage,g);0<l.length&&this.pushEventsForSupplierMatches({iFrameId:a,supplierMatches:l,eventName:"supplierMatchSubmitted",currentQuestionNumber:e,
totalQuestions:h,widgetLabel:k});f.furthestNavigatedPage=g+1;g=0<f.submissionEventsSent;var m=Number.isNaN(b.submissionId)?void 0:parseInt(b.submissionId,10);g=Object.assign({},{submissionId:m,iFrameId:a,widgetLabel:f.widgetLabel,isResubmission:g,visitorId:this.getCurrentWidget(a).visitorId},this.getSubcategoryDetails(a),this.getLastAnsweredQuestionInfo(a,b.submissionPage),this.getAppointmentBookingDetails(b.appointmentId,a));c.pushEventToDataLayer("formSubmit",g);b.encryptedAnswers&&(this.encryptionKeys?
this.decryptAnswers(b.encryptedAnswers).then(function(n){c.pushEventToDataLayer("webform_submission_completed",Object.assign({},{answers:n,submissionId:m,visitorId:d.getCurrentWidget(a).visitorId},d.getSubcategoryDetails(a)))}):console.error("the webform_submission_completed event is not triggering correctly for this form.  Please contact your MVF support team if you cannot resolve this issue"));f.submissionEventsSent+=1};c.prototype.thankYouPageReachedEventHandler=function(a,b){var d=this.chameleonWidgets[a],
f=1<d.submissionEventsSent,g=Number.isNaN(b.submissionId)?void 0:parseInt(b.submissionId,10);c.pushEventToDataLayer("thankYouPageReached",Object.assign({},{isResubmission:f,iFrameId:a,submissionId:g,widgetLabel:d.widgetLabel,visitorId:this.getCurrentWidget(a).visitorId},this.getSubcategoryDetails(a),this.getLastAnsweredQuestionInfo(a,b.submissionPage)))};c.prototype.questionAnsweredEventHandler=function(a,b){this.getAnswerDetails(a)[b.componentId]={value:b.value,visitorTier:b.visitorTier}};c.prototype.handleSupplierMatchRequest=
function(a){var b=this,d=a.iFrameId,f=a.eventInfo,g=a.isCustomerMatchesRequest;if(!0!==g||!1!==f.isSuccess){var e=f.matches.slice(0,f.maxMatches);f.isMatchImpliedByPrivacyStatement&&(this.getSupplierMatchDetails(d).areSupplierMatchesHidden=!0);Object.entries(this.getSupplierMatchPages(d)).forEach(function(h){h=$jscomp.makeIterator(h);var k=h.next().value;h.next().value.forEach(function(l){b.getAnswerDetails(d)[l]={value:e.join(", "),visitorTier:""};l=b.getPage(d,k)[l];l.matches=e;l.isDynamicMatches=
g;l.matchLevel=!0===g?f.matchLevel:f.isSuccess?"subcategoryFallback":"admiralFallback";l.hiddenForSingleMatch=1===e.length})})}};c.prototype.initialWidgetLoadEventHandler=function(a,b){var d=this.chameleonWidgets[a];this.isFormPagesBuildComplete(a)||(this.getCurrentWidget(a).formPages=c.buildFormPages(b.formComponents),this.getCurrentWidget(a).componentVisibility=c.buildComponentVisibility(b.formComponents));this.getCurrentWidget(a).subcategoryDetails={formSubcategoryGUID:b.subcategoryId,formSubcategoryName:b.subcategoryName,
formTradingHubId:b.tradingHubId,formTradingHubName:b.tradingHubName,formCategoryGUID:b.categoryId,formCategoryName:b.categoryName,formSectorName:b.sectorName};this.getCurrentWidget(a).visitorId=b.visitorId;this.getSupplierMatchPages(a)||(this.getCurrentWidget(a).supplierMatch.supplierMatchPages=c.buildSupplierMatchPages(b.formComponents));d.submissionPage=b.submissionPage;c.pushEventToDataLayer("initialWidgetLoad",Object.assign({},{iFrameId:a,widgetLabel:d.widgetLabel,totalQuestions:this.getTotalQuestionsForDisplay(a,
b.submissionPage)},this.getCurrentWidget(a).subcategoryDetails,this.getCurrentQuestionInfo(a,b.currentPage,b.submissionPage),{visitorId:b.visitorId}))};c.prototype.failedForwardPageNavigationEventHandler=function(a,b){var d=this.getErrorsInfo(a);0!==Object.keys(d).length&&(b=Object.assign({},d,{iFrameId:a,currentQuestionNumber:this.getQuestionNumberForDisplay(a,b.currentPage,b.submissionPage),visitorId:this.getCurrentWidget(a).visitorId}),c.pushEventToDataLayer("formError",b),this.chameleonWidgets[a].currentQuestionErrors=
{})};c.prototype.submissionHandler=function(a,b,d){this.formSubmitEventHandler(d,a);a=Object.assign({},a);a=(delete a.encryptedAnswers,a);c.runIfFunction(b.formSubmit,a);c.runIfFunction(b.finalSubmission,a)};c.newsletterSignupShownHandler=function(a,b,d){c.pushEventToDataLayer("newsletterSignupShown",Object.assign({},{iFrameId:a.iFrameId,widgetLabel:b,visitorId:d},a.actionDetails))};c.newsletterClickHandler=function(a,b,d){c.pushEventToDataLayer("userAction",Object.assign({},a.value,{type:a.type,
iFrameId:a.iFrameId,widgetLabel:b,visitorId:d},a.actionDetails))};c.downloadContentHandler=function(a,b,d){c.pushEventToDataLayer("userAction",Object.assign({},a.value,{type:a.type,iFrameId:a.iFrameId,text:a.actionDetails.text,content:a.actionDetails.content,widgetLabel:b,visitorId:d}))};c.formatTimeAndDateFromISOString=function(a){var b=new Date(a);a=(new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"})).format(b);b=(new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",
hour12:!1})).format(b);return{date:a,time:b}};c.prototype.appointmentPromptReachedHandler=function(a,b,d){this.getCurrentWidget(a.iFrameId).appointmentBooking.page=a.actionDetails.page;this.appointmentHandler(a,b,d)};c.prototype.appointmentTimeSelectedHandler=function(a,b,d){var f=a.actionDetails.appointment.isoDate,g=c.formatTimeAndDateFromISOString(f);this.appointmentHandler(a,b,d,{appointmentDate:g.date,appointmentTime:g.time,appointmentIsoDate:f})};c.prototype.appointmentConfirmedHandler=function(a,
b,d){var f=a.actionDetails.appointment.isoDate;this.getCurrentWidget(a.iFrameId).appointmentBooking.clinic=a.actionDetails.appointment.clinic;var g=c.formatTimeAndDateFromISOString(f),e=g.date;g=g.time;this.getCurrentWidget(a.iFrameId).appointmentBooking.date=e;this.getCurrentWidget(a.iFrameId).appointmentBooking.time=g;this.getCurrentWidget(a.iFrameId).appointmentBooking.isoDate=f;this.appointmentHandler(a,b,d,{clinicId:a.actionDetails.appointment.clinic.id,clinicName:a.actionDetails.appointment.clinic.name,
appointmentTime:g,appointmentDate:e,appointmentIsoDate:a.actionDetails.appointment.isoDate})};c.prototype.clinicSelectedHandler=function(a,b,d){this.appointmentHandler(a,b,d,{clinicId:a.actionDetails.clinic.id,clinicName:a.actionDetails.clinic.name})};c.prototype.appointmentHandler=function(a,b,d,f){f=void 0===f?{}:f;var g=this.getCurrentWidget(a.iFrameId).appointmentBooking.page;g&&(g=this.getQuestionNumberForDisplay(a.iFrameId,g,this.getSubmissionPage(a.iFrameId)),c.pushEventToDataLayer("appointmentBooking",
Object.assign({},{type:a.type,iFrameId:a.iFrameId,widgetLabel:b,visitorId:d,page:g},f)))};c.prototype.addTranslationLayer=function(a){var b=this,d=a.iFrameId,f=void 0===a.widgetLabel?"":a.widgetLabel,g=void 0===a.eventHandlers?{}:a.eventHandlers;this.chameleonWidgets[d]={widgetLabel:f,formPages:{},answerDetails:{},componentVisibility:{},furthestNavigatedPage:1,currentQuestionErrors:{},submissionEventsSent:0,supplierMatch:{supplierMatchPages:void 0,areSupplierMatchesHidden:!1},appointmentBooking:{},
visitorId:null,submissionPage:null};return Object.assign({},g,{initialWidgetLoad:function(e){b.initialWidgetLoadEventHandler(d,e);c.runIfFunction(g.initialWidgetLoad,e)},initialWidgetInteraction:function(e){c.pushEventToDataLayer("initialWidgetInteraction",Object.assign({},e,{visitorId:b.getCurrentWidget(d).visitorId}));c.runIfFunction(g.initialWidgetInteraction,e)},widgetVisible:function(e){c.pushEventToDataLayer("widgetVisible",e);c.runIfFunction(g.widgetVisible,e)},pageChanged:function(e){b.pageChangedEventHandler(d,
e);c.runIfFunction(g.pageChanged,e)},userAction:function(e){var h={newsletterSignupShown:c.newsletterSignupShownHandler,doNotSubscribeClick:c.newsletterClickHandler,subscriptionClick:c.newsletterClickHandler,downloadContentClick:c.downloadContentHandler,appointmentPromptReached:b.appointmentPromptReachedHandler.bind(b),showAppointmentsClicked:b.appointmentHandler.bind(b),skipClinicSelectionClicked:b.appointmentHandler.bind(b),clinicSelected:b.clinicSelectedHandler.bind(b),appointmentTimeSelected:b.appointmentTimeSelectedHandler.bind(b),
appointmentConfirmed:b.appointmentConfirmedHandler.bind(b)}[e.type];if("function"===typeof h){var k=b.getCurrentWidget(d).visitorId;h(e,f,k)}c.runIfFunction(g.userAction,e)},questionAnswered:function(e){b.questionAnsweredEventHandler(d,e);c.runIfFunction(g.questionAnswered,e)},formSubmit:function(e){b.submissionHandler(e,g,d)},finalSubmission:function(e){return b.submissionHandler(e,g,d)},formError:function(e){b.formErrorEventHandler(d,e);c.runIfFunction(g.formError,e)},failedForwardPageNavigation:function(e){b.failedForwardPageNavigationEventHandler(d,
e)},subcategoryMatchesRequested:function(e){b.handleSupplierMatchRequest({iFrameId:d,eventInfo:e,isCustomerMatchesRequest:!1});c.runIfFunction(g.subcategoryMatchesRequested,e)},customerMatchesRequested:function(e){b.handleSupplierMatchRequest({iFrameId:d,eventInfo:e,isCustomerMatchesRequest:!0});c.runIfFunction(g.customerMatchesRequested,e)},thankYouPageReached:function(e){b.thankYouPageReachedEventHandler(d,e);c.runIfFunction(g.thankYouPageReached,e)}})};return{addTranslationLayer:function(a){return c.getInstance().addTranslationLayer(a)},
getPublicKeyString:function(){return c.getInstance().getPublicKeyString()}}}();

<!DOCTYPE html>
<html>
<head>
    <title>Chameleon testing playground</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="./script.js"></script>
    <script src="./datalayer-logger.js"></script>
    <script>
        window.dataLayer = window.dataLayer || new Proxy([], {
            set: (obj, prop, value) => {
                if (prop !== 'length') {
                    const pushEvent = new CustomEvent('datalayerpush', {
                        detail: value
                    });
                    window.dispatchEvent(pushEvent);
                }
                return Reflect.set(obj, prop, value);
            }
        });
    </script>

    <!-- Start Lytics Tracking Tag Version 3 -->
    <script type="text/javascript">
        !function(){"use strict";var o=window.jstag||(window.jstag={}),r=[];function n(e){o[e]=function(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];r.push([e,t])}}n("send"),n("mock"),n("identify"),n("pageView"),n("unblock"),n("getid"),n("setid"),n("loadEntity"),n("getEntity"),n("on"),n("once"),n("call"),o.loadScript=function(n,t,i){var e=document.createElement("script");e.async=!0,e.src=n,e.onload=t,e.onerror=i;var o=document.getElementsByTagName("script")[0],r=o&&o.parentNode||document.head||document.body,c=o||r.lastChild;return null!=c?r.insertBefore(e,c):r.appendChild(e),this},o.init=function n(t){return this.config=t,this.loadScript(t.src,function(){if(o.init===n)throw new Error("Load error!");o.init(o.config),function(){for(var n=0;n<r.length;n++){var t=r[n][0],i=r[n][1];o[t].apply(o,i)}r=void 0}()}),this}}();
        // Define config and initialize Lytics tracking tag.
        // - The setup below will disable the automatic sending of Page Analysis Information (to prevent duplicative sends, as this same information will be included in the jstag.pageView() call below, by default)
        jstag.init({
            src: 'https://c.lytics.io/api/tag/ff6c1a41af8f70f2335c7e501f2cbc4e/latest.min.js',
            pageAnalysis: {
                dataLayerPull: {
                    disabled: true
                }
            }
        });

        // You may need to send a page view, depending on your use-case
        jstag.pageView();
    </script>

</head>
<body>
    <div class="sidebar">
        <div>
            <label for="formId">Form ID</label>
            <input type="text" name="formId" id="formId" placeholder="Form ID" value="9867">
        </div>
        <div>
            <label for="env">Environment</label>
            <select id="env" name="env">
                <option value="dev">Local</option>
                <option value="staging" selected>Staging</option>
                <option value="a1.staging">Staging a1</option>
                <option value="a2.staging">Staging a2</option>
                <option value="a3.staging">Staging a3</option>
                <option value="a4.staging">Staging a4</option>
                <option value="a5.staging">Staging a5</option>
                <option value="a6.staging">Staging a6</option>
                <option value="b1.staging">Staging b1</option>
                <option value="production EU">Production</option>
            </select>
        </div>
        <div>
            <label for="themeName">Theme</label>
            <select id="themeName" name="themeName">
                <option value="indigo">Indigo</option>
                <option value="chameleon">Chameleon</option>
                <option value="rhubarb">Rhubarb</option>
                <option value="atlantic">Atlantic</option>
                <option value="custom">Custom</option>
            </select>
        </div>
        <div>
            <label for="featureFlags">Feature flags</label>
            <input type="text" name="featureFlags" id="featureFlags" placeholder="default">
        </div>
        <div>
            <button onclick="loadForm()">Load form</button>
        </div>
        <div>
            <label>dataLayer entries</label>
            <datalayer-logger></datalayer-logger>
        </div>
    </div>
    <div class="content">
        <div class="container" id="chameleonContainer"></div>
    </div>
</body>
</html>

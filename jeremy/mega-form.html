<!-- find deployed at https://chameleondevs.github.io/jeremy/mega-form.html -->
<!DOCTYPE html>
<html lang="en">
<script>
  const SCRIPTS = {
    MVF_GTM_TRANSLATION_LAYER: {
      EU: "https://chameleon-frontend-eu.mvfglobal.com/mvfGtmTranslationLayer.min.js",
      NA: "https://chameleon-frontend-na.mvfglobal.com/mvfGtmTranslationLayer.min.js",
      STG: "https://chameleon-frontend-staging.mvfglobal.com/mvfGtmTranslationLayer.min.js",
      STG_A5: "https://chameleon-frontend-a5.staging.mvfglobal.com/mvfGtmTranslationLayer.min.js",
      BRANCH: "https://gold-1947.chameleon.staging.mvfglobal.com/mvfGtmTranslationLayer.min.js",
      DEV: "../Projects/chameleon/mvf_gtm_translation_layer/mvfGtmTranslationLayer.js"
    },
    BROWSER_BACK_INTERCEPT: {
      EU: "https://chameleon-frontend-eu.mvfglobal.com/browserBackIntercept.min.js",
      NA: "https://chameleon-frontend-na.mvfglobal.com/browserBackIntercept.min.js",
      STG: "https://chameleon-frontend-staging.mvfglobal.com/browserBackIntercept.min.js",
      STG_A5: "https://chameleon-frontend-a5.staging.mvfglobal.com/browserBackIntercept.min.js",
      BRANCH: "https://gold-1947.chameleon.staging.mvfglobal.com/browserBackIntercept.min.js",
      DEV: "../Projects/chameleon/browser_back_intercept/browserBackIntercept.js"
    },
    FORM_LOADER: {
      EU: "https://chameleon-frontend-eu.mvfglobal.com/formLoader.min.js",
      NA: "https://chameleon-frontend-na.mvfglobal.com/formLoader.min.js",
      STG: "https://chameleon-frontend-staging.mvfglobal.com/formLoader.min.js",
      STG_A5: "https://chameleon-frontend-a5.staging.mvfglobal.com/formLoader.min.js",
      BRANCH: "https://gold-1947.chameleon.staging.mvfglobal.com/formLoader.min.js",
      DEV: "../Projects/chameleon/form_loader_and_snippet/formLoader.js"
    }
  }

  const TESTING_FORMS = {
    EU: {
      RADIO_WITH_ICONS: "13228",
      STANDARD_TESTING_FORM: "12584",
      RADIO_NO_ICONS: "13232",
      TEXTFIELD_US_ZIP: "13232",
      SELECT: "13233",
      CHECKBOXES_NO_ICONS: "13237",
      CHECKBOXES_WITH_ICONS: "15593",
      TEXTFIELD_EMAIL: "13238",
      TEXTFIELD: "13239",
      AUTOCOMPLETE: "13259",
      PHONE_NUMBER: "13261",
      TCPA_US: "13398",
      TCPA_UK: "13399",
      TWO_COMPONENTS: "13400",
      NOT_AUTO_AND_AUTO_ADVANCE: "13403",
      CONDITIONAL_OR: "13561",
      CONDITIONAL_AND: "13562",
      DATEPICKER: "13633",
      GOOGLE_ADDRESS_INPUT: "13864",
      DATADOG_SYNTHETIC_SMOKE_TESTS: "14467",
      DATADOG_E2E_SUBMISSION: "14902",
      MAXIMUM_HEIGHT: "14910",
      SUPPLIER_MATCH: "15424"
    },
    NA: {
      RADIO_WITH_ICONS: "6208",
      STANDARD_TESTING_FORM: "6207",
      RADIO_NO_ICONS: "6209",
      TEXTFIELD_US_ZIP: "6209",
      SELECT: "6210",
      CHECKBOXES_NO_ICONS: "6211",
      CHECKBOXES_WITH_ICONS: "7281",
      TEXTFIELD_EMAIL: "6212",
      TEXTFIELD: "6213",
      AUTOCOMPLETE: "6214",
      PHONE_NUMBER: "6215",
      TCPA_US: "6216",
      TCPA_UK: "6217",
      TWO_COMPONENTS: "6218",
      NOT_AUTO_AND_AUTO_ADVANCE: "6219",
      CONDITIONAL_OR: "6220",
      CONDITIONAL_AND: "6221",
      DATEPICKER: "6222",
      GOOGLE_ADDRESS_INPUT: "6223",
      DATADOG_SYNTHETIC_SMOKE_TESTS: "6536",
      DATADOG_E2E_SUBMISSION: "6743",
      MAXIMUM_HEIGHT: "6759",
      SUPPLIER_MATCH: "7034"
    },
    STAGING_A: {
      RADIO_WITH_ICONS: "9684",
      STANDARD_TESTING_FORM: "9660",
      RADIO_NO_ICONS: "9751",
      TEXTFIELD_US_ZIP: "9685",
      SELECT: "9695",
      CHECKBOXES_NO_ICONS: "9687",
      CHECKBOXES_WITH_ICONS: "9752",
      TEXTFIELD_EMAIL: "9688",
      TEXTFIELD: "9689",
      AUTOCOMPLETE: "9690",
      PHONE_NUMBER: "9691",
      TCPA_US: "9702",
      TCPA_UK: "9703",
      TWO_COMPONENTS: "9705",
      NOT_AUTO_AND_AUTO_ADVANCE: "9706",
      CONDITIONAL_OR: "9716",
      CONDITIONAL_AND: "9715",
      DATEPICKER: "9720",
      GOOGLE_ADDRESS_INPUT: "9718",
      TEXTAREA: "9735",
      EXTERNAL_SELECT: "9823",
      EXTERNAL_SELECT_MULTIPLE_PAGES: "9824",
      DATADOG_SYNTHETIC_SMOKE_TESTS: "9830",
      CPC_CARDS: "9830",
      DATADOG_E2E_SUBMISSION: "9830",
      MAXIMUM_HEIGHT: "9881",
      SUPPLIER_MATCH: "9991",
      SUPPLIER_CARDS: "10010",
      SELECT_AND_CONNECT: "10039"
    }
  };
</script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- <title>Embed: anura staging</title>
  <script type="text/javascript">
    (function() {
      // Store Anura data when it's available
      let anuraData = null;
      let anuraInitialized = false;

      // Handle messages from iframe
      window.addEventListener('message', function(event) {
          // console.log('1111111 Message received', event, anuraData, anuraInitialized);
          if (!anuraData || !anuraInitialized){
            initAnura().then(data => {
              anuraData = data;
            });
          }
      });

      // Initialize Anura and return a promise that resolves with the data
      function initAnura() {
        anuraInitialized = true;
        // console.log('1111111 Anura initialized');

        return new Promise((resolve) => {
          injectAnuraScript(resolve);
        });
      }


      function injectAnuraScript(callback) {
        // console.log('111111 Injecting Anura script');
        const urlParams = new URLSearchParams(window.location.search);
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;

        // Set up the callback that Anura will call
        window.anuraResponseCallback = function() {
          // console.log('1111111 Anura response callback');
          if (!window.Anura?.getAnura) {
            console.error('Anura not properly initialized');
            return;
          }

          const status = determineAnuraStatus(window.Anura);
          const id = window.Anura.getAnura().getId();

          console.log('Anura status:', status);
          console.log('Anura ID:', id);

          window.anuraData = { status, id };

          // Store the data for future requests
          const data = { status, id };
          anuraData = data;

          // Resolve the promise with the data
          callback(data);
        };

        // Set up the Anura script URL
        script.src = `https://script.anura.io/request.js?${buildQueryParams({
          instance: '3946031687',
          source: urlParams.get('utm_source') || 'direct',
          campaign: urlParams.get('cid') || 'none',
          callback: 'anuraResponseCallback',
          additional: JSON.stringify({
            'msclkid': urlParams.get('msclkid') || 'none',
            'gclid': urlParams.get('gclid') || 'none',
            'fbclid': urlParams.get('fbclid') || 'none',
            'ttclid': urlParams.get('ttclid') || 'none'
          })
        })}`;

        // console.log('11111 Anura script URL:', script.src);
        document.head.appendChild(script);
      }

      function buildQueryParams(params) {
        // console.log('11111 Building query params', params);
        return Object.entries(params)
          .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)
          .join('&') + `&rand=${Math.floor(1E12 * Math.random() + 1)}`;
      }

      function determineAnuraStatus(Anura) {
        // console.log('11111 Determining Anura status', Anura);
        if (Anura.getAnura().isGood()) return 'good';
        if (Anura.getAnura().isWarning()) return 'warning';
        if (Anura.getAnura().isBad()) return 'bad';
        return '';
      }
    })();
  </script> -->
</head>

<body>
  <main>
    <script type="text/javascript">
      // window.chameleonTestSettings = {
      //   features: [
      //     'showSmartMatchMeter',
      //   ],
      // }
    </script>
    <script>
      document.write('<script src="' + SCRIPTS.FORM_LOADER.DEV + '"><\/script>');
      document.write('<script src="' + SCRIPTS.MVF_GTM_TRANSLATION_LAYER.DEV + '"><\/script>');
      document.write('<script src="' + SCRIPTS.BROWSER_BACK_INTERCEPT.DEV + '"><\/script>');
    </script>
    <script type="text/javascript">
      const env = {
        DEV: "dev",
        EU: "eu",
        NA: "na",
        STG: "staging",
        STG_A5: "a5.staging",
        BRANCH: "staging/GOLD-1947" // update this to your feature branch if using
      }

      var inputData = {
        // formId: TESTING_FORMS.STAGING_A.SUPPLIER_MATCH,
        formId: TESTING_FORMS.STAGING_A.STANDARD_TESTING_FORM,
        env: env.DEV,
        dynamicHeight: false,
        autoScroll: false,
        // containerId: "ExpertMarketWidget1",
        height: 300,
        // maxWidth: 800,
        // dynamicHeight: true,
        // autoScroll: true,
        // fontOverride: "Public Sans",
        // isConsentStatementAboveNavigation: false,
        // borderEnabled: true,
        // belowFold: true,
        // useCidFromURL: false,
        // headerEnabled: false,
        // belowFold: false,
        // widgetLabel: "AssociateYourWidgetToLeadsHere",
        // themeName: 'custom',
        // paletteOverrides: {
        //   answerSelectedColor: "#12bd9c",
        //   answerBackgroundColor: "#ffffff",
        //   widgetBackgroundColor: "#fdfdfd",
        //   answerUnselectedColor: "#949494",
        //   continueButtonColor: "#3754a0",
        //   continueButtonHoverColor: "#5c78c7",
        //   backButtonColor: "#ededed",
        //   backButtonHoverColor: "#dfdfdf",
        //   secondaryBackgroundColor: "#eaf7fe",
        //   scrollIndicatorColor: "#4f4f4f",
        //   primaryTextColor: "#000000",
        //   continueButtonTextColor: "#ffffff",
        //   secondaryTextColor: "#4f4f4f",
        // },
        eventHandlers: {
          // thankYouPageRequested: function (eventInfo) {
          //   eventInfo.event = "thankYouPageRequested";
          //   console.log("thankYouPageRequested", eventInfo);
          // },
          // initialWidgetLoad: function (eventInfo) {
          //   eventInfo.event = "initialWidgetLoad";
          //   console.log("initialWidgetLoad", eventInfo);
          //   window?.dataLayer?.push(eventInfo);
          // },
          // widgetVisible: function (eventInfo) {
          //     eventInfo.event = "widgetVisible";
          //     console.log("widgetVisible", eventInfo);
          //     window?.dataLayer?.push(eventInfo);
          // },
          // initialWidgetInteraction: function (eventInfo) {
          //     eventInfo.event = "initialWidgetInteraction";
          //     console.log("initialWidgetInteraction", eventInfo);
          //     window?.dataLayer?.push(eventInfo);
          // },
          // pageChanged: function (eventInfo) {
          //     eventInfo.event = "pageChanged";
          //     console.log("pageChanged: log from inputData event handler", eventInfo);
          //     window?.dataLayer?.push(eventInfo);
          // },
          // questionAnswered: function (eventInfo) {
          //     eventInfo.event = "questionAnswered";
          //     console.log("questionAnswered", eventInfo);
          //     window?.dataLayer?.push(eventInfo);
          // },
          // formSubmit: function (eventInfo) {
          //     eventInfo.event = "formSubmit";
          //     console.log("formSubmit", eventInfo);
          //     window?.dataLayer?.push(eventInfo);
          // },
          // formError: function (errorInfo) {
          //     errorInfo.event = "formError";
          //     console.log("formError", eventInfo);
          //     window?.dataLayer?.push(errorInfo);
          // },
          // userAction: function (errorInfo) {
          //     errorInfo.event = "userAction";
          //     console.log("userAction", eventInfo);
          //     window?.dataLayer?.push(errorInfo);
          // },
        },
      };
      var formWidgetInfoObject = runFormWidgetLoader(inputData);

      // const sendSessionData = formWidgetInfoObject.sendSessionDataToMvfFormWidget;
      // var dataToSend = {
      // "b7127daf-ae89-11e3-aa27-22000a699fb3": "Unasdfasdfise",
      // "4aec93a7-ae88-11e3-aa27-22000a699fb3": "hgsghsdgf",
      // "1e4bf0ed-01f5-11e8-bbea-02e4563f24a3": "Yes",
      // "89e571a0-1649-11e8-bbea-02e4563f24a3": "Restaurant",
      // "ab4a728a-165f-11e8-bbea-02e4563f24a3": "Full Service",
      // "232a0663-1713-11e8-bbea-02e4563f24a3": "1",
      // "0bcb3c61-164a-11e8-bbea-02e4563f24a3": "Yes",
      // "8ccbf425-164b-11e8-bbea-02e4563f24a3": "Complete POS system",
      // "4fc36f3c-ae8b-11e3-aa27-22000a699fb3": "Printer",
      // phone_work: "15852826897",
      // first_name: "Bob Smith",
      // company_name: "MVF",
      // email1: "test@test.com",
      // primary_address_postalcode: "90210",
      // };
      // sendSessionData(dataToSend);

    </script>
  </main>
</body>

</html>
